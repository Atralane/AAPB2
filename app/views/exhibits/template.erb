<% content_for :sidebar do %>
  <%= render partial: 'sidebar_search' %>

  <% @exhibit.facets.each do |name, list| %>
    <%= render partial: 'shared/sidebar_nav', 
               locals: { 
                  title: name,
                  links: list.each_slice(2).map do |facet,count|
                    [
                      "#{facet} (#{count})", 
                      "/catalog?f[exhibits][]=#{@exhibit.path}&f[#{name}][]=#{facet}"
                    ]
                  end
                } %>
  <% end %>

  <img src="<%= @exhibit.thumbnail_url %>"/>
  <br/><br/><%# TODO: CSS to establish spacing. %>
  
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Author</h3>
    </div>
    <div class="panel-body">
      <%= @exhibit.author_html.html_safe %>
    </div>
  </div>
  
  <%= render partial: 'shared/sidebar_nav', 
             locals: { 
                title: 'Sub-exhibits',
                links: @exhibit.children.map { |child| [child.name, "/exhibits/#{child.path}"] }
              } %>
    
  <%= render partial: 'shared/sidebar_nav', 
             locals: { 
                title: 'Links',
                links: @exhibit.links
              } %>
    
<% end %>
  
<% content_for :main do %>
  
  <p>
    TODO: Bread crumbs for navigation:
    <% @exhibit.ancestors.map do |ancestor| %>
      <a href="/exhibits/<%= ancestor.path %>"><%= ancestor.name %></a>
    <% end %>
  </p>
  <%= @exhibit.body_html.html_safe %>
  
<% end %>
    
<%= render partial: 'shared/title_sidebar_main', 
           locals: {
             sidebar: yield(:sidebar),
             main: yield(:main)
           } %> 